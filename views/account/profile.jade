extends ../layout

block content
	.page-header
		h3 Profile Information
	form#uploadProfileImage(method="post",enctype="multipart/form-data")
			.form-group
				input(type='hidden', name='_csrf', value=_csrf)
				input(type="text",name="title",placeholder="title")
				input(type="file",name="upl",accept="image/jpeg")
				input(type="submit")
	form.form-horizontal(action='/account/profile', method='POST')
		input(type='hidden', name='_csrf', value=_csrf)
		.form-group
			label.col-sm-3.control-label(for='email') Email
			.col-sm-7
				input.form-control(type='email', name='email', id='email', value='#{user.email}' disabled)
		.form-group
			label.col-sm-3.control-label(for='name') Name
			.col-sm-7
				input.form-control(type='text', name='name', id='name', value='#{user.name||""}')
		.form-group
			label.col-sm-3.control-label(for='username') Username
			.col-sm-7
				.input-group
					span#basic-addon3.input-group-addon http://ttree.me/
					input.form-control(type='text', name='username', id='username', value='#{user.username||""}')
		.form-group
			label.col-sm-3.control-label(for='profileImage') Profile Image
			input.debugHide#profileImageURL(name='profileImageURL', value=user.profileImageURL)
			.col-sm-4
				.imgBox
					.imgBg(style="background:url(#{user.profileImageURL||'http://placekitten.com/128/128'})")
					#uploadNewProfileImage.imgOverlay
						i.fa.fa-upload
		.form-group.hidden
			label.col-sm-3.control-label(for='gender') Gender
			.col-sm-6
				label.radio.col-sm-3
					input(type='radio', checked=user.gender=='male', name='gender', value='male', data-toggle='radio')
					span Male
				label.radio.col-sm-3
					input(type='radio', checked=user.gender=='female', name='gender', value='female', data-toggle='radio')
					span Female
				label.radio.col-sm-3
					input(type='radio', checked=user.gender=='other', name='gender', value='other', data-toggle='radio')
					span Other
		for pField in ["bio","status","schoolName","shippingAddress"]
			.form-group
				label.col-sm-3.control-label(for=pField)= pField
				.col-sm-7
					input.form-control(type='text', name=pField, id=pField, value='#{user[pField]||""}')
		.form-group
			label.col-sm-3.control-label(for='location') Location
			.col-sm-7
				input.form-control(type='text', name='location', id='location', value='#{user.location||""}')
		.form-group
			label.col-sm-3.control-label(for='website') Website
			.col-sm-7
				input.form-control(type='text', name='website', id='website', value='#{user.website||""}')
		i.pull-right.notYet.pointer(onclick="$('.debugHide').toggle()") debug
		.debugHide
			for field in ["wishes","wishes_fulfilled","lists","organizations","grades","classes","tags"]
				.form-group
					label.col-sm-3.control-label(for=field)= field
					.col-sm-7
						input.form-control(disabled type='text', name=field, id=field, value='#{user[field]||""}')
		.form-group
			.col-sm-offset-3.col-sm-4
				button.btn.btn.btn-primary(type='submit')
					i.fa.fa-pencil
					| Update Profile
	.notYet
		.page-header
			h3 Change Password
	
		form.form-horizontal(action='/account/password', method='POST')
			input(type='hidden', name='_csrf', value=_csrf)
			.form-group
				label.col-sm-3.control-label(for='password') New Password
				.col-sm-7
					input.form-control(type='password', name='password', id='password')
			.form-group
				label.col-sm-3.control-label(for='confirmPassword') Confirm Password
				.col-sm-7
					input.form-control(type='password', name='confirmPassword', id='confirmPassword')
			.form-group
				.col-sm-offset-3.col-sm-4
					button.btn.btn-primary(type='submit')
						i.fa.fa-lock
						| Change Password
	
		.page-header
			h3 Delete Account
	
		form.form-horizontal(action='/account/delete', method='POST')
			.form-group
				p.col-sm-offset-3.col-sm-4 You can delete your account, but keep in mind this action is irreversible.
				input(type='hidden', name='_csrf', value=_csrf)
				.col-sm-offset-3.col-sm-4
					button.btn.btn-danger(type='submit')
						i.fa.fa-trash
						| Delete my account
	
		.page-header
			h3 Linked Accounts
		.form-horizontal
			.form-group
				.col-sm-offset-3.col-sm-4
					if user.instagram
						p: a.text-danger(href='/account/unlink/instagram') Unlink your Instagram account
					else
						p: a(href='/auth/instagram') Link your Instagram account
				.col-sm-offset-3.col-sm-4
					if user.google
						p: a.text-danger(href='/account/unlink/google') Unlink your Google account
					else
						p: a(href='/auth/google') Link your Google account
				.col-sm-offset-3.col-sm-4
					if user.facebook
						p: a.text-danger(href='/account/unlink/facebook') Unlink your Facebook account
					else
						p: a(href='/auth/facebook') Link your Facebook account
				.col-sm-offset-3.col-sm-4
					if user.twitter
						p: a.text-danger(href='/account/unlink/twitter') Unlink your Twitter account
					else
						p: a(href='/auth/twitter') Link your Twitter account
				.col-sm-offset-3.col-sm-4
					if user.github
						p: a.text-danger(href='/account/unlink/github') Unlink your GitHub account
					else
						p: a(href='/auth/github') Link your GitHub account
				.col-sm-offset-3.col-sm-4
					if user.linkedin
						p: a.text-danger(href='/account/unlink/linkedin') Unlink your LinkedIn account
					else
						p: a(href='/auth/linkedin') Link your LinkedIn account
block footer
	script(src='js/profileUI.js')